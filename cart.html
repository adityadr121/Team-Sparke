<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HealthAssist ‚Äì Medicine Cart</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --teal: #0d9488;
      --teal-dark: #0f766e;
      --teal-light: #ccfbf1;
      --navy: #0f172a;
      --slate: #334155;
      --muted: #94a3b8;
      --white: #ffffff;
      --bg: #f0fdf9;
      --error: #ef4444;
      --success: #4ade80;
      --warning: #f59e0b;
      --border: #e2e8f0;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      min-height: 100vh;
      color: var(--navy);
    }

    /* NAVBAR */
    .navbar {
      background: var(--white);
      border-bottom: 1px solid var(--border);
      padding: 0 40px;
      height: 68px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 1px 12px rgba(13,148,136,0.08);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }
    .brand-icon {
      width: 42px; height: 42px;
      background: linear-gradient(135deg, var(--teal), var(--teal-dark));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .brand-name {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      font-weight: 700;
      color: var(--navy);
    }
    .brand-name span { color: var(--teal); }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    .nav-link {
      font-size: 14px;
      color: var(--slate);
      text-decoration: none;
      transition: color 0.2s;
    }
    .nav-link:hover { color: var(--teal); }

    .cart-badge {
      background: linear-gradient(135deg, var(--teal), var(--teal-dark));
      color: white;
      border-radius: 20px;
      padding: 6px 16px;
      font-size: 13.5px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* PAGE LAYOUT */
    .page {
      max-width: 1180px;
      margin: 0 auto;
      padding: 40px 24px 80px;
    }

    .page-header {
      margin-bottom: 32px;
      animation: fadeUp 0.6s ease both;
    }

    .page-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 34px;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 6px;
    }

    .page-header p {
      color: var(--muted);
      font-size: 14.5px;
    }

    /* BREADCRUMB */
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 28px;
      animation: fadeUp 0.6s 0.05s ease both;
    }
    .breadcrumb a { color: var(--teal); text-decoration: none; }
    .breadcrumb span { color: var(--muted); }

    /* MAIN GRID */
    .grid {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 28px;
      align-items: start;
    }

    /* CART ITEMS */
    .cart-section {
      display: flex;
      flex-direction: column;
      gap: 16px;
      animation: fadeUp 0.7s 0.1s ease both;
    }

    .section-title {
      font-size: 13px;
      font-weight: 500;
      color: var(--muted);
      letter-spacing: 0.8px;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .cart-card {
      background: var(--white);
      border-radius: 18px;
      border: 1.5px solid var(--border);
      padding: 20px;
      display: grid;
      grid-template-columns: 70px 1fr auto;
      gap: 16px;
      align-items: center;
      transition: box-shadow 0.2s, border-color 0.2s, transform 0.2s;
      position: relative;
      overflow: hidden;
    }

    .cart-card:hover {
      box-shadow: 0 8px 30px rgba(13,148,136,0.1);
      border-color: #b2f5ea;
      transform: translateY(-1px);
    }

    .cart-card::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 4px;
      background: linear-gradient(180deg, var(--teal), var(--teal-dark));
      border-radius: 4px 0 0 4px;
    }

    .medicine-img {
      width: 70px; height: 70px;
      border-radius: 14px;
      background: var(--teal-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      flex-shrink: 0;
    }

    .medicine-info { flex: 1; }

    .medicine-name {
      font-family: 'Playfair Display', serif;
      font-size: 17px;
      font-weight: 600;
      color: var(--navy);
      margin-bottom: 3px;
    }

    .medicine-generic {
      font-size: 12.5px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .medicine-tags {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }

    .tag {
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 500;
    }

    .tag-rx {
      background: #fef3c7;
      color: #d97706;
    }
    .tag-otc {
      background: var(--teal-light);
      color: var(--teal-dark);
    }
    .tag-category {
      background: #f1f5f9;
      color: var(--slate);
    }

    .medicine-desc {
      font-size: 12.5px;
      color: var(--slate);
      line-height: 1.5;
    }

    .stock-badge {
      font-size: 11.5px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 6px;
    }
    .stock-ok { color: #16a34a; }
    .stock-low { color: var(--warning); }

    .cart-card-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      min-width: 110px;
    }

    .price {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      font-weight: 700;
      color: var(--navy);
    }

    .price-unit {
      font-size: 11px;
      color: var(--muted);
      font-family: 'DM Sans', sans-serif;
      font-weight: 400;
    }

    .price-old {
      font-size: 13px;
      color: var(--muted);
      text-decoration: line-through;
      font-family: 'DM Sans', sans-serif;
    }

    .qty-control {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--bg);
      border-radius: 10px;
      padding: 4px 8px;
      border: 1.5px solid var(--border);
    }

    .qty-btn {
      width: 26px; height: 26px;
      border-radius: 7px;
      border: none;
      background: var(--white);
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--teal);
      font-weight: 600;
      transition: background 0.15s;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    }
    .qty-btn:hover { background: var(--teal-light); }

    .qty-val {
      font-size: 15px;
      font-weight: 500;
      width: 20px;
      text-align: center;
      color: var(--navy);
    }

    .remove-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 12px;
      color: #ef4444;
      font-family: 'DM Sans', sans-serif;
      padding: 0;
      transition: opacity 0.2s;
    }
    .remove-btn:hover { opacity: 0.7; }

    /* CHECKOUT SIDEBAR */
    .checkout-sidebar {
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: sticky;
      top: 88px;
      animation: fadeUp 0.7s 0.2s ease both;
    }

    .checkout-card {
      background: var(--white);
      border-radius: 18px;
      border: 1.5px solid var(--border);
      padding: 24px;
    }

    .checkout-card h3 {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 20px;
      padding-bottom: 14px;
      border-bottom: 1px solid var(--border);
    }

    .order-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      color: var(--slate);
      margin-bottom: 12px;
    }

    .order-row.total {
      border-top: 1px solid var(--border);
      padding-top: 14px;
      margin-top: 4px;
      font-weight: 600;
      font-size: 16px;
      color: var(--navy);
    }

    .order-row .savings {
      color: #16a34a;
      font-weight: 500;
    }

    .coupon-row {
      display: flex;
      gap: 8px;
      margin: 16px 0;
    }

    .coupon-input {
      flex: 1;
      padding: 10px 14px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13.5px;
      color: var(--navy);
      outline: none;
      transition: border-color 0.2s;
    }
    .coupon-input:focus { border-color: var(--teal); }
    .coupon-input::placeholder { color: #cbd5e1; }

    .coupon-btn {
      padding: 10px 16px;
      background: var(--teal-light);
      color: var(--teal-dark);
      border: none;
      border-radius: 10px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13.5px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
    }
    .coupon-btn:hover { background: #99f6e4; }

    /* PAYMENT OPTIONS */
    .payment-card h3 {
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 16px;
    }

    .payment-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    .payment-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 13px 16px;
      border-radius: 12px;
      border: 1.5px solid var(--border);
      cursor: pointer;
      transition: border-color 0.2s, background 0.2s;
      position: relative;
    }

    .payment-option:hover { border-color: var(--teal); background: #f0fdfa; }

    .payment-option.selected {
      border-color: var(--teal);
      background: var(--teal-light);
    }

    .payment-option input[type="radio"] {
      accent-color: var(--teal);
      width: 16px; height: 16px;
      flex-shrink: 0;
    }

    .payment-icon { font-size: 22px; }

    .payment-label {
      font-size: 14px;
      font-weight: 500;
      color: var(--navy);
      flex: 1;
    }

    .payment-sub {
      font-size: 11.5px;
      color: var(--muted);
    }

    /* CARD FORM */
    .card-form {
      display: none;
      flex-direction: column;
      gap: 12px;
      margin-top: 6px;
      padding: 16px;
      background: var(--bg);
      border-radius: 12px;
      border: 1px dashed var(--border);
    }
    .card-form.active { display: flex; }

    .field-error {
      font-size: 11.5px;
      color: var(--error);
      margin-top: 4px;
      display: none;
      align-items: center;
      gap: 4px;
    }
    .field-error.visible { display: flex; }

    .form-field input.invalid {
      border-color: var(--error) !important;
      box-shadow: 0 0 0 3px rgba(239,68,68,0.12);
    }
    .form-field input.valid {
      border-color: #16a34a !important;
      box-shadow: 0 0 0 3px rgba(22,163,74,0.1);
    }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }
    .shake { animation: shake 0.4s ease; }

    .required-badge {
      display: inline-block;
      background: #fef2f2;
      color: var(--error);
      font-size: 10px;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 4px;
      margin-left: 4px;
      letter-spacing: 0.3px;
    }

    .payment-form-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--slate);
      letter-spacing: 0.5px;
      text-transform: uppercase;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .payment-form-title::after {
      content: '* All fields required';
      font-size: 10.5px;
      font-weight: 400;
      color: var(--error);
      text-transform: none;
      letter-spacing: 0;
    }

    .form-row { display: flex; gap: 10px; }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 5px;
      flex: 1;
    }

    .form-field label {
      font-size: 12px;
      font-weight: 500;
      color: var(--slate);
      letter-spacing: 0.3px;
    }

    .form-field input {
      padding: 10px 12px;
      border: 1.5px solid var(--border);
      border-radius: 9px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13.5px;
      color: var(--navy);
      outline: none;
      background: var(--white);
      transition: border-color 0.2s;
    }
    .form-field input:focus { border-color: var(--teal); }
    .form-field input::placeholder { color: #cbd5e1; }

    .btn-checkout {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, var(--teal) 0%, var(--teal-dark) 100%);
      color: var(--white);
      border: none;
      border-radius: 14px;
      font-family: 'DM Sans', sans-serif;
      font-size: 15.5px;
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.2s;
      box-shadow: 0 4px 18px rgba(13,148,136,0.35);
      letter-spacing: 0.3px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-checkout:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 28px rgba(13,148,136,0.45);
    }

    .secure-note {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: var(--muted);
      justify-content: center;
      margin-top: 12px;
    }

    /* ADDRESS CARD */
    .address-card {
      background: var(--white);
      border-radius: 18px;
      border: 1.5px solid var(--border);
      padding: 24px;
    }
    .address-card h3 {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .address-card .section-sub {
      font-size: 12.5px;
      color: var(--muted);
      margin-bottom: 18px;
    }
    .addr-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .addr-grid .full { grid-column: 1 / -1; }
    .addr-field {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .addr-field label {
      font-size: 12px;
      font-weight: 500;
      color: var(--slate);
      letter-spacing: 0.3px;
    }
    .addr-field input, .addr-field select, .addr-field textarea {
      padding: 10px 12px;
      border: 1.5px solid var(--border);
      border-radius: 9px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13.5px;
      color: var(--navy);
      outline: none;
      background: var(--white);
      transition: border-color 0.2s, box-shadow 0.2s;
      width: 100%;
    }
    .addr-field input:focus, .addr-field select:focus, .addr-field textarea:focus {
      border-color: var(--teal);
      box-shadow: 0 0 0 3px rgba(13,148,136,0.1);
    }
    .addr-field input::placeholder, .addr-field textarea::placeholder { color: #cbd5e1; }
    .addr-field textarea { resize: none; height: 68px; line-height: 1.5; }
    .addr-field input.invalid, .addr-field select.invalid, .addr-field textarea.invalid {
      border-color: var(--error) !important;
      box-shadow: 0 0 0 3px rgba(239,68,68,0.1);
    }
    .addr-field input.valid, .addr-field select.valid, .addr-field textarea.valid {
      border-color: #16a34a !important;
      box-shadow: 0 0 0 3px rgba(22,163,74,0.08);
    }
    .addr-err {
      font-size: 11px;
      color: var(--error);
      display: none;
      align-items: center;
      gap: 3px;
      margin-top: 2px;
    }
    .addr-err.visible { display: flex; }

    /* DELIVERY CARD */
    .delivery-card {
      background: linear-gradient(135deg, #0d9488, #0f766e);
      border-radius: 16px;
      padding: 18px 20px;
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .delivery-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .delivery-text h4 {
      color: var(--white);
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 2px;
    }
    .delivery-text p {
      color: rgba(255,255,255,0.7);
      font-size: 12.5px;
    }

    .delivery-badge {
      margin-left: auto;
      background: rgba(255,255,255,0.18);
      color: white;
      border-radius: 20px;
      padding: 4px 12px;
      font-size: 12px;
      font-weight: 500;
      border: 1px solid rgba(255,255,255,0.25);
      white-space: nowrap;
    }

    /* EMPTY STATE */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      display: none;
    }
    .empty-state.visible { display: block; }
    .empty-state .big-icon { font-size: 64px; margin-bottom: 16px; }
    .empty-state h3 {
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      color: var(--navy);
      margin-bottom: 8px;
    }
    .empty-state p { color: var(--muted); font-size: 14px; margin-bottom: 20px; }
    .btn-shop {
      padding: 12px 28px;
      background: linear-gradient(135deg, var(--teal), var(--teal-dark));
      color: white;
      border: none;
      border-radius: 12px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 14px rgba(13,148,136,0.3);
    }

    /* TOAST */
    .toast {
      position: fixed;
      bottom: 28px;
      right: 28px;
      background: var(--navy);
      color: white;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      transform: translateY(80px);
      opacity: 0;
      transition: all 0.35s ease;
      z-index: 999;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .toast.show { transform: translateY(0); opacity: 1; }

    /* MODAL OVERLAY */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      backdrop-filter: blur(4px);
    }
    .modal-overlay.open { opacity: 1; pointer-events: all; }

    .modal {
      background: white;
      border-radius: 24px;
      padding: 40px;
      max-width: 440px;
      width: 90%;
      text-align: center;
      transform: scale(0.9);
      transition: transform 0.3s;
    }
    .modal-overlay.open .modal { transform: scale(1); }

    .modal-icon { font-size: 60px; margin-bottom: 16px; }
    .modal h2 {
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      color: var(--navy);
      margin-bottom: 10px;
    }
    .modal p { color: var(--muted); font-size: 14.5px; line-height: 1.6; margin-bottom: 24px; }
    .btn-modal {
      padding: 13px 36px;
      background: linear-gradient(135deg, var(--teal), var(--teal-dark));
      color: white;
      border: none;
      border-radius: 12px;
      font-family: 'DM Sans', sans-serif;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 18px rgba(13,148,136,0.35);
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 840px) {
      .grid { grid-template-columns: 1fr; }
      .checkout-sidebar { position: static; }
      .cart-card { grid-template-columns: 60px 1fr; }
      .cart-card-right { flex-direction: row; align-items: center; grid-column: 1 / -1; }
    }

    @media (max-width: 480px) {
      .navbar { padding: 0 20px; }
      .page { padding: 24px 16px 60px; }
      .cart-card { padding: 16px; gap: 12px; }
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <a href="#" class="brand">
    <div class="brand-icon">üè•</div>
    <div class="brand-name">Health<span>Assist</span></div>
  </a>
  <div class="nav-right">
    <a href="#" class="nav-link">Home</a>
    <a href="#" class="nav-link">Medicines</a>
    <a href="#" class="nav-link">Consult</a>
    <div class="cart-badge">üõí Cart (<span id="cartCount">4</span>)</div>
  </div>
</nav>

<!-- PAGE -->
<div class="page">
  <div class="breadcrumb">
    <a href="#">Home</a>
    <span>‚Ä∫</span>
    <a href="#">Pharmacy</a>
    <span>‚Ä∫</span>
    <span>My Cart</span>
  </div>

  <div class="page-header">
    <h1>Your Medicine Cart üõí</h1>
    <p>Review your items and complete your order securely.</p>
  </div>

  <div class="grid">
    <!-- LEFT: CART ITEMS -->
    <div class="cart-section">
      <div class="section-title">Items in your cart</div>

      <!-- Medicine 1 -->
      <div class="cart-card" id="item-1">
        <div class="medicine-img">üíä</div>
        <div class="medicine-info">
          <div class="medicine-name">Amoxicillin 500mg</div>
          <div class="medicine-generic">Generic: Amoxicillin Trihydrate</div>
          <div class="medicine-tags">
            <span class="tag tag-rx">Rx Required</span>
            <span class="tag tag-category">Antibiotic</span>
          </div>
          <div class="medicine-desc">Used to treat bacterial infections including chest, dental, and urinary tract infections. Take with or without food.</div>
          <div class="stock-badge stock-ok">‚úÖ In Stock &nbsp;¬∑&nbsp; 21 Capsules/Strip</div>
        </div>
        <div class="cart-card-right">
          <div>
            <div class="price">‚Çπ148 <span class="price-unit">/ strip</span></div>
            <div class="price-old">‚Çπ185</div>
          </div>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeQty('item-1', -1)">‚àí</button>
            <span class="qty-val" id="qty-item-1">2</span>
            <button class="qty-btn" onclick="changeQty('item-1', 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeItem('item-1')">üóë Remove</button>
        </div>
      </div>

      <!-- Medicine 2 -->
      <div class="cart-card" id="item-2">
        <div class="medicine-img">ü©π</div>
        <div class="medicine-info">
          <div class="medicine-name">Pantoprazole 40mg</div>
          <div class="medicine-generic">Generic: Pantoprazole Sodium</div>
          <div class="medicine-tags">
            <span class="tag tag-otc">OTC</span>
            <span class="tag tag-category">Antacid / PPI</span>
          </div>
          <div class="medicine-desc">Reduces stomach acid production. Used for heartburn, GERD, and peptic ulcers. Best taken 30 minutes before meals.</div>
          <div class="stock-badge stock-ok">‚úÖ In Stock &nbsp;¬∑&nbsp; 15 Tablets/Strip</div>
        </div>
        <div class="cart-card-right">
          <div>
            <div class="price">‚Çπ82 <span class="price-unit">/ strip</span></div>
            <div class="price-old">‚Çπ102</div>
          </div>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeQty('item-2', -1)">‚àí</button>
            <span class="qty-val" id="qty-item-2">1</span>
            <button class="qty-btn" onclick="changeQty('item-2', 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeItem('item-2')">üóë Remove</button>
        </div>
      </div>

      <!-- Medicine 3 -->
      <div class="cart-card" id="item-3">
        <div class="medicine-img">üå°Ô∏è</div>
        <div class="medicine-info">
          <div class="medicine-name">Paracetamol 650mg</div>
          <div class="medicine-generic">Generic: Acetaminophen</div>
          <div class="medicine-tags">
            <span class="tag tag-otc">OTC</span>
            <span class="tag tag-category">Analgesic / Antipyretic</span>
          </div>
          <div class="medicine-desc">Relieves mild to moderate pain and reduces fever. Safe for adults and children over 12 years. Do not exceed 4 doses in 24 hrs.</div>
          <div class="stock-badge stock-low">‚ö†Ô∏è Low Stock &nbsp;¬∑&nbsp; Only 8 strips left</div>
        </div>
        <div class="cart-card-right">
          <div>
            <div class="price">‚Çπ36 <span class="price-unit">/ strip</span></div>
            <div class="price-old">‚Çπ45</div>
          </div>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeQty('item-3', -1)">‚àí</button>
            <span class="qty-val" id="qty-item-3">3</span>
            <button class="qty-btn" onclick="changeQty('item-3', 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeItem('item-3')">üóë Remove</button>
        </div>
      </div>

      <!-- Medicine 4 -->
      <div class="cart-card" id="item-4">
        <div class="medicine-img">üíâ</div>
        <div class="medicine-info">
          <div class="medicine-name">Metformin HCl 500mg</div>
          <div class="medicine-generic">Generic: Metformin Hydrochloride</div>
          <div class="medicine-tags">
            <span class="tag tag-rx">Rx Required</span>
            <span class="tag tag-category">Antidiabetic</span>
          </div>
          <div class="medicine-desc">First-line oral medication for Type 2 diabetes. Helps control blood sugar levels. Always take with food to avoid stomach upset.</div>
          <div class="stock-badge stock-ok">‚úÖ In Stock &nbsp;¬∑&nbsp; 20 Tablets/Strip</div>
        </div>
        <div class="cart-card-right">
          <div>
            <div class="price">‚Çπ54 <span class="price-unit">/ strip</span></div>
            <div class="price-old">‚Çπ68</div>
          </div>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeQty('item-4', -1)">‚àí</button>
            <span class="qty-val" id="qty-item-4">2</span>
            <button class="qty-btn" onclick="changeQty('item-4', 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeItem('item-4')">üóë Remove</button>
        </div>
      </div>

      <!-- Empty state -->
      <div class="empty-state" id="emptyState">
        <div class="big-icon">üõí</div>
        <h3>Your cart is empty</h3>
        <p>Looks like you haven't added any medicines yet.</p>
        <button class="btn-shop">Browse Medicines</button>
      </div>
    </div>

    <!-- RIGHT: CHECKOUT -->
    <div class="checkout-sidebar">

      <!-- Delivery Banner -->
      <div class="delivery-card">
        <div class="delivery-icon">üöö</div>
        <div class="delivery-text">
          <h4>Free Express Delivery</h4>
          <p>Estimated arrival: Today, by 8 PM</p>
        </div>
        <div class="delivery-badge">FREE</div>
      </div>

      <!-- Delivery Address -->
      <div class="address-card">
        <h3>üè† Delivery Address</h3>
        <p class="section-sub">We'll deliver your medicines to this address. All fields are required.</p>
        <div class="addr-grid">

          <div class="addr-field">
            <label>Full Name <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="addrName" placeholder="Your full name"
              oninput="addrValidate('addrName', v => v.trim().length >= 2, 'addrNameErr')"
              onblur="addrValidate('addrName', v => v.trim().length >= 2, 'addrNameErr')"/>
            <div class="addr-err" id="addrNameErr">‚ö† Enter your full name.</div>
          </div>

          <div class="addr-field">
            <label>Phone Number <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="addrPhone" placeholder="10-digit mobile number" maxlength="10"
              oninput="this.value=this.value.replace(/\D/g,''); addrValidate('addrPhone', v => /^\d{10}$/.test(v), 'addrPhoneErr')"
              onblur="addrValidate('addrPhone', v => /^\d{10}$/.test(v), 'addrPhoneErr')"/>
            <div class="addr-err" id="addrPhoneErr">‚ö† Enter a valid 10-digit number.</div>
          </div>

          <div class="addr-field full">
            <label>Flat / House No., Building & Street <span class="required-badge">REQUIRED</span></label>
            <textarea id="addrStreet" placeholder="e.g. Flat 4B, Sunrise Apartments, MG Road"
              oninput="addrValidate('addrStreet', v => v.trim().length >= 5, 'addrStreetErr')"
              onblur="addrValidate('addrStreet', v => v.trim().length >= 5, 'addrStreetErr')"></textarea>
            <div class="addr-err" id="addrStreetErr">‚ö† Please enter your street address.</div>
          </div>

          <div class="addr-field">
            <label>City <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="addrCity" placeholder="City"
              oninput="addrValidate('addrCity', v => v.trim().length >= 2, 'addrCityErr')"
              onblur="addrValidate('addrCity', v => v.trim().length >= 2, 'addrCityErr')"/>
            <div class="addr-err" id="addrCityErr">‚ö† Enter your city.</div>
          </div>

          <div class="addr-field">
            <label>State <span class="required-badge">REQUIRED</span></label>
            <select id="addrState"
              onchange="addrValidate('addrState', v => v !== '', 'addrStateErr')"
              onblur="addrValidate('addrState', v => v !== '', 'addrStateErr')">
              <option value="">-- Select State --</option>
              <option>Andhra Pradesh</option><option>Assam</option><option>Bihar</option>
              <option>Delhi</option><option>Goa</option><option>Gujarat</option>
              <option>Haryana</option><option>Himachal Pradesh</option><option>Jharkhand</option>
              <option>Karnataka</option><option>Kerala</option><option>Madhya Pradesh</option>
              <option>Maharashtra</option><option>Odisha</option><option>Punjab</option>
              <option>Rajasthan</option><option>Tamil Nadu</option><option>Telangana</option>
              <option>Uttar Pradesh</option><option>Uttarakhand</option><option>West Bengal</option>
            </select>
            <div class="addr-err" id="addrStateErr">‚ö† Please select your state.</div>
          </div>

          <div class="addr-field">
            <label>PIN Code <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="addrPin" placeholder="6-digit PIN" maxlength="6"
              oninput="this.value=this.value.replace(/\D/g,''); addrValidate('addrPin', v => /^\d{6}$/.test(v), 'addrPinErr')"
              onblur="addrValidate('addrPin', v => /^\d{6}$/.test(v), 'addrPinErr')"/>
            <div class="addr-err" id="addrPinErr">‚ö† Enter a valid 6-digit PIN code.</div>
          </div>

          <div class="addr-field">
            <label>Address Type</label>
            <select id="addrType">
              <option value="home">üè† Home</option>
              <option value="work">üè¢ Work</option>
              <option value="other">üìç Other</option>
            </select>
          </div>

        </div>
      </div>
      <div class="checkout-card">
        <h3>Order Summary</h3>

        <div class="order-row"><span>Subtotal (8 items)</span><span id="subtotal">‚Çπ696</span></div>
        <div class="order-row"><span>Delivery Charges</span><span style="color:#16a34a;font-weight:500">FREE</span></div>
        <div class="order-row"><span>Discount (Offer)</span><span class="savings" id="savings">‚àí‚Çπ154</span></div>
        <div class="order-row"><span>Platform Fee</span><span>‚Çπ9</span></div>

        <div class="coupon-row">
          <input class="coupon-input" type="text" placeholder="Enter coupon code" id="couponInput"/>
          <button class="coupon-btn" onclick="applyCoupon()">Apply</button>
        </div>

        <div class="order-row total">
          <span>Total Payable</span>
          <span id="totalAmount">‚Çπ551</span>
        </div>

        <div style="font-size:12px;color:#16a34a;text-align:right;margin-top:4px;">
          üéâ You save <strong id="savedLabel">‚Çπ154</strong> on this order!
        </div>
      </div>

      <!-- Payment Options -->
      <div class="checkout-card payment-card">
        <h3>Payment Method</h3>
        <div class="payment-options">

          <label class="payment-option selected" onclick="selectPayment(this, 'card')">
            <input type="radio" name="payment" value="card" checked/>
            <span class="payment-icon">üí≥</span>
            <div>
              <div class="payment-label">Credit / Debit Card</div>
              <div class="payment-sub">Visa, Mastercard, RuPay</div>
            </div>
          </label>

          <label class="payment-option" onclick="selectPayment(this, 'upi')">
            <input type="radio" name="payment" value="upi"/>
            <span class="payment-icon">üì±</span>
            <div>
              <div class="payment-label">UPI</div>
              <div class="payment-sub">GPay, PhonePe, Paytm, BHIM</div>
            </div>
          </label>

          <label class="payment-option" onclick="selectPayment(this, 'nb')">
            <input type="radio" name="payment" value="nb"/>
            <span class="payment-icon">üè¶</span>
            <div>
              <div class="payment-label">Net Banking</div>
              <div class="payment-sub">All major banks supported</div>
            </div>
          </label>          <label class="payment-option" onclick="selectPayment(this, 'cod')">
            <input type="radio" name="payment" value="cod"/>
            <span class="payment-icon">üíµ</span>
            <div>
              <div class="payment-label">Cash on Delivery</div>
              <div class="payment-sub">Pay when you receive</div>
            </div>
          </label>
        </div>

        <!-- Card Details Form -->
        <div class="card-form active" id="cardForm">
          <div class="payment-form-title">üí≥ Card Details</div>
          <div class="form-field">
            <label>Card Number <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19"
              oninput="formatCard(this); liveValidateCard(this)"
              onblur="liveValidateCard(this)"/>
            <div class="field-error" id="cardNumberErr">‚ö† Please enter a valid 16-digit card number.</div>
          </div>
          <div class="form-field">
            <label>Cardholder Name <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="cardName" placeholder="Name as on card"
              onblur="liveValidateName(this)"
              oninput="liveValidateName(this)"/>
            <div class="field-error" id="cardNameErr">‚ö† Please enter the cardholder's name.</div>
          </div>
          <div class="form-row">
            <div class="form-field">
              <label>Expiry <span class="required-badge">REQUIRED</span></label>
              <input type="text" id="cardExpiry" placeholder="MM / YY" maxlength="7"
                oninput="formatExpiry(this); liveValidateExpiry(this)"
                onblur="liveValidateExpiry(this)"/>
              <div class="field-error" id="cardExpiryErr">‚ö† Enter a valid expiry (MM/YY).</div>
            </div>
            <div class="form-field">
              <label>CVV <span class="required-badge">REQUIRED</span></label>
              <input type="password" id="cardCVV" placeholder="‚Ä¢‚Ä¢‚Ä¢" maxlength="3"
                oninput="liveValidateCVV(this)"
                onblur="liveValidateCVV(this)"/>
              <div class="field-error" id="cardCVVErr">‚ö† CVV must be 3 digits.</div>
            </div>
          </div>
        </div>

        <!-- UPI Form -->
        <div class="card-form" id="upiForm">
          <div class="payment-form-title">üì± UPI Details</div>
          <div class="form-field">
            <label>UPI ID <span class="required-badge">REQUIRED</span></label>
            <input type="text" id="upiId" placeholder="yourname@upi"
              oninput="liveValidateUPI(this)"
              onblur="liveValidateUPI(this)"/>
            <div class="field-error" id="upiIdErr">‚ö† Enter a valid UPI ID (e.g. name@upi).</div>
          </div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px;">
            üì≤ Supported: GPay, PhonePe, Paytm, BHIM, Amazon Pay
          </div>
        </div>

        <!-- Net Banking Form -->
        <div class="card-form" id="nbForm">
          <div class="payment-form-title">üè¶ Net Banking</div>
          <div class="form-field">
            <label>Select Bank <span class="required-badge">REQUIRED</span></label>
            <select id="nbBank" onchange="liveValidateBank(this)" onblur="liveValidateBank(this)"
              style="padding:10px 12px;border:1.5px solid var(--border);border-radius:9px;font-family:'DM Sans',sans-serif;font-size:13.5px;color:var(--navy);outline:none;background:var(--white);transition:border-color 0.2s;width:100%;">
              <option value="">-- Select your bank --</option>
              <option>State Bank of India</option>
              <option>HDFC Bank</option>
              <option>ICICI Bank</option>
              <option>Axis Bank</option>
              <option>Kotak Mahindra Bank</option>
              <option>Punjab National Bank</option>
              <option>Bank of Baroda</option>
              <option>Yes Bank</option>
            </select>
            <div class="field-error" id="nbBankErr">‚ö† Please select your bank.</div>
          </div>
        </div>

        <br/>
        <button class="btn-checkout" onclick="placeOrder()">
          üîê Place Order &nbsp;¬∑&nbsp; <span id="btnTotal">‚Çπ551</span>
        </button>
        <div class="secure-note">
          üîí 256-bit SSL Secured &nbsp;|&nbsp; HIPAA Compliant
        </div>
      </div>

    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- SUCCESS MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-icon">üéâ</div>
    <h2>Order Placed!</h2>
    <p>Your medicines will be delivered to:</p>
    <div id="modalAddress" style="background:#f0fdf9;border:1.5px solid #b2f5ea;border-radius:12px;padding:12px 16px;margin:12px 0 20px;font-size:13.5px;color:#0f172a;line-height:1.7;text-align:left;"></div>
    <p style="color:#94a3b8;font-size:13px;">Estimated delivery: <strong style="color:#0f172a">Today by 8 PM</strong>. SMS confirmation sent!</p>
    <br/>
    <button class="btn-modal" onclick="closeModal()">Track My Order ‚Üí</button>
  </div>
</div>

<script>
  const prices = {
    'item-1': 148,
    'item-2': 82,
    'item-3': 36,
    'item-4': 54
  };
  const origPrices = {
    'item-1': 185,
    'item-2': 102,
    'item-3': 45,
    'item-4': 68
  };
  const quantities = {
    'item-1': 2,
    'item-2': 1,
    'item-3': 3,
    'item-4': 2
  };
  const removed = { 'item-1': false, 'item-2': false, 'item-3': false, 'item-4': false };
  let couponDiscount = 0;
  let currentPayment = 'card';

  function recalc() {
    let subtotal = 0, savings = 0, totalQty = 0;
    for (const id in prices) {
      if (!removed[id]) {
        const q = quantities[id];
        subtotal += prices[id] * q;
        savings += (origPrices[id] - prices[id]) * q;
        totalQty += q;
      }
    }
    savings += couponDiscount;
    const total = subtotal - couponDiscount + 9;
    document.getElementById('subtotal').textContent = '‚Çπ' + subtotal;
    document.getElementById('savings').textContent = '‚àí‚Çπ' + savings;
    document.getElementById('totalAmount').textContent = '‚Çπ' + total;
    document.getElementById('btnTotal').textContent = '‚Çπ' + total;
    document.getElementById('savedLabel').textContent = '‚Çπ' + savings;
    document.getElementById('cartCount').textContent = totalQty;
    const activeItems = Object.keys(removed).filter(id => !removed[id]);
    document.getElementById('emptyState').classList.toggle('visible', activeItems.length === 0);
  }

  function changeQty(id, delta) {
    quantities[id] = Math.max(1, quantities[id] + delta);
    document.getElementById('qty-' + id).textContent = quantities[id];
    recalc();
    showToast('üîÑ Quantity updated');
  }

  function removeItem(id) {
    removed[id] = true;
    const el = document.getElementById(id);
    el.style.transition = 'opacity 0.35s, transform 0.35s';
    el.style.opacity = '0';
    el.style.transform = 'translateX(40px)';
    setTimeout(() => el.style.display = 'none', 360);
    recalc();
    showToast('üóë Item removed from cart');
  }

  function selectPayment(el, type) {
    currentPayment = type;
    document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
    el.classList.add('selected');
    document.getElementById('cardForm').classList.remove('active');
    document.getElementById('upiForm').classList.remove('active');
    document.getElementById('nbForm').classList.remove('active');
    if (type === 'card') document.getElementById('cardForm').classList.add('active');
    if (type === 'upi') document.getElementById('upiForm').classList.add('active');
    if (type === 'nb') document.getElementById('nbForm').classList.add('active');
  }

  function formatCard(input) {
    let v = input.value.replace(/\D/g, '').substring(0, 16);
    input.value = v.replace(/(.{4})/g, '$1 ').trim();
  }

  function formatExpiry(input) {
    let v = input.value.replace(/\D/g, '').substring(0, 4);
    if (v.length >= 2) v = v.substring(0,2) + ' / ' + v.substring(2);
    input.value = v;
  }

  /* ‚îÄ‚îÄ LIVE VALIDATORS ‚îÄ‚îÄ */
  function setValidity(input, errEl, valid, msg) {
    input.classList.toggle('invalid', !valid);
    input.classList.toggle('valid', valid);
    errEl.classList.toggle('visible', !valid);
    if (msg) errEl.innerHTML = '‚ö† ' + msg;
  }

  function liveValidateCard(input) {
    const digits = input.value.replace(/\s/g,'');
    const ok = digits.length === 16 && /^\d+$/.test(digits);
    setValidity(input, document.getElementById('cardNumberErr'), ok);
    return ok;
  }

  function liveValidateName(input) {
    const ok = input.value.trim().length >= 2;
    setValidity(input, document.getElementById('cardNameErr'), ok);
    return ok;
  }

  function liveValidateExpiry(input) {
    const parts = input.value.replace(/\s/g,'').split('/');
    const mm = parseInt(parts[0]);
    const yy = parseInt(parts[1]);
    const ok = !isNaN(mm) && !isNaN(yy) && mm >= 1 && mm <= 12 && yy >= 25;
    setValidity(input, document.getElementById('cardExpiryErr'), ok);
    return ok;
  }

  function liveValidateCVV(input) {
    const ok = /^\d{3}$/.test(input.value.trim());
    setValidity(input, document.getElementById('cardCVVErr'), ok);
    return ok;
  }

  function liveValidateUPI(input) {
    const ok = /^[\w.\-]+@[\w]+$/.test(input.value.trim());
    setValidity(input, document.getElementById('upiIdErr'), ok);
    return ok;
  }

  function liveValidateBank(select) {
    const ok = select.value !== '';
    const errEl = document.getElementById('nbBankErr');
    select.style.borderColor = ok ? '#16a34a' : 'var(--error)';
    errEl.classList.toggle('visible', !ok);
    return ok;
  }

  /* ‚îÄ‚îÄ ADDRESS VALIDATION ‚îÄ‚îÄ */
  function addrValidate(id, testFn, errId) {
    const el = document.getElementById(id);
    const ok = testFn(el.value);
    el.classList.toggle('invalid', !ok);
    el.classList.toggle('valid', ok);
    document.getElementById(errId).classList.toggle('visible', !ok);
    return ok;
  }

  function validateAddress() {
    const n  = addrValidate('addrName',   v => v.trim().length >= 2,       'addrNameErr');
    const p  = addrValidate('addrPhone',  v => /^\d{10}$/.test(v),         'addrPhoneErr');
    const s  = addrValidate('addrStreet', v => v.trim().length >= 5,       'addrStreetErr');
    const c  = addrValidate('addrCity',   v => v.trim().length >= 2,       'addrCityErr');
    const st = addrValidate('addrState',  v => v !== '',                   'addrStateErr');
    const pi = addrValidate('addrPin',    v => /^\d{6}$/.test(v),          'addrPinErr');
    if (!n || !p || !s || !c || !st || !pi) {
      // Scroll address section into view
      document.querySelector('.address-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
      showToast('‚ùå Please complete your delivery address.');
      return false;
    }
    return true;
  }

  /* ‚îÄ‚îÄ FULL VALIDATION ON SUBMIT ‚îÄ‚îÄ */
  function validatePaymentFields() {
    if (currentPayment === 'card') {
      const n = liveValidateCard(document.getElementById('cardNumber'));
      const nm = liveValidateName(document.getElementById('cardName'));
      const e = liveValidateExpiry(document.getElementById('cardExpiry'));
      const c = liveValidateCVV(document.getElementById('cardCVV'));
      if (!n || !nm || !e || !c) {
        shakeForm('cardForm');
        showToast('‚ùå Please fill in all card details correctly.');
        return false;
      }
    } else if (currentPayment === 'upi') {
      const u = liveValidateUPI(document.getElementById('upiId'));
      if (!u) {
        shakeForm('upiForm');
        showToast('‚ùå Please enter a valid UPI ID.');
        return false;
      }
    } else if (currentPayment === 'nb') {
      const b = liveValidateBank(document.getElementById('nbBank'));
      if (!b) {
        shakeForm('nbForm');
        showToast('‚ùå Please select your bank.');
        return false;
      }
    }
    return true;
  }

  function shakeForm(id) {
    const form = document.getElementById(id);
    form.classList.remove('shake');
    void form.offsetWidth; // reflow to restart animation
    form.classList.add('shake');
    setTimeout(() => form.classList.remove('shake'), 500);
  }

  function applyCoupon() {
    const code = document.getElementById('couponInput').value.trim().toUpperCase();
    if (code === 'HEALTH20') {
      couponDiscount = 50;
      showToast('‚úÖ Coupon HEALTH20 applied! ‚Çπ50 off');
    } else if (code === 'FIRST50') {
      couponDiscount = 80;
      showToast('‚úÖ Coupon FIRST50 applied! ‚Çπ80 off');
    } else {
      showToast('‚ùå Invalid coupon code');
      return;
    }
    recalc();
  }

  function placeOrder() {
    const addrOk = validateAddress();
    const payOk  = validatePaymentFields();
    if (!addrOk || !payOk) return;

    const btn = document.querySelector('.btn-checkout');
    btn.innerHTML = '‚è≥ Processing...';
    btn.disabled = true;
    setTimeout(() => {
      // Populate modal address
      const name   = document.getElementById('addrName').value.trim();
      const phone  = document.getElementById('addrPhone').value.trim();
      const street = document.getElementById('addrStreet').value.trim();
      const city   = document.getElementById('addrCity').value.trim();
      const state  = document.getElementById('addrState').value;
      const pin    = document.getElementById('addrPin').value.trim();
      const type   = document.getElementById('addrType').value;
      const typeLabel = type === 'home' ? 'üè† Home' : type === 'work' ? 'üè¢ Work' : 'üìç Other';
      document.getElementById('modalAddress').innerHTML =
        `<strong>${name}</strong> &nbsp;¬∑&nbsp; ${phone}<br>${street},<br>${city}, ${state} ‚Äì ${pin}<br><span style="font-size:11.5px;color:var(--teal);font-weight:500">${typeLabel}</span>`;
      btn.innerHTML = '‚úÖ Order Placed!';
      document.getElementById('modalOverlay').classList.add('open');
    }, 1800);
  }

  function closeModal() {
    document.getElementById('modalOverlay').classList.remove('open');
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    clearTimeout(t._timer);
    t._timer = setTimeout(() => t.classList.remove('show'), 2800);
  }

  recalc();
</script>
</body>
</html>
